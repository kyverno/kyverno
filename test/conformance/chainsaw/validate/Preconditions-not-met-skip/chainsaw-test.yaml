apiVersion: chainsaw.kyverno.io/v1alpha1
kind: Test
metadata:
  creationTimestamp: null
  name: any
spec:
  steps:
  - name: step-01
    try: 
    - apply:
        file: PolicyA.yaml
  - name: step-02
    try:
    - apply:
        file: PolicyB.yaml
  - name: step-03
    try:
    - script:
       content: kubectl apply -f resource.yaml
       check:
         # This check ensures the contents of stderr are exactly as shown.
         ($stderr): |-
           "Error from server: error when creating \"resource.yaml\": admission webhook \"validate.kyverno.svc-fail\" denied the request: \n\nresource Namespace//asdfhl was blocked due to the following policies \n\nrequire-ns-owner-label:\n  check-for-namespace-owner-label: 'validation error: The label `uw.systems/owner`\n    is required. Check policy at https://github.com/utilitywarehouse/system-manifests/tree/master/kyverno/policies/namespaces/require-ns-owner-label.yaml\n    for allowed label values. rule check-for-namespace-owner-label failed at path\n    /metadata/labels/uw.systems/owner/'"