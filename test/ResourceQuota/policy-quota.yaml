apiVersion : kubepolicy.nirmata.io/v1alpha1
kind : Policy
metadata :
  name : policy-quota-low-test
spec :
  rules:
    - name:
      resource:
        kind : ResourceQuota
        selector:
          matchLabels:
            quota: low
      mutate:
        patches:
        - path : "/spec/scopeSelector/matchExpressions/1"
          op : add
          value :
            operator : In
            scopeName: PriorityClass
            values: ["low-medium"]
        - path : "/spec/hard"
          op : replace
          value: {
            "cpu": "10",
            "memory": "10Gi",
            "pods": "10",
            "limits.memory": "12Gi",
            "requests.nvidia.com/gpu": "8"
          }
        - path : "/metadata/labels/quota-soft"
          op : replace
          value : replaced
