apiVersion : kyverno.io/v1alpha1
kind : Policy
metadata :
  name : policy-quota-low-test-validation
spec :
  rules:
    - name: "rule1"
      match:
        resources:
          kinds : 
          - ResourceQuota
          selector:
            matchLabels:
              quota: low
      validate:
        message: "This RQ requests too many RAM"
        pattern:
          spec:
            hard:
              memory: "8Gi|12Gi"
    - name: "rule2"
      match:
        resources:
          kinds : 
          - ResourceQuota
          selector:
            matchLabels:
              quota: low
      validate:
        message: "This RQ requests too many CPUs"
        pattern:
          spec:
            hard:
              cpu: <3
    - name: "rule3"
      match:
        resources:
          kinds : 
          - ResourceQuota
          selector:
            matchLabels:
              quota: low
      validate:
        message: "This RQ requests too many PODs"
        pattern:
          spec:
            hard:
              pods: 1|2|3|4
